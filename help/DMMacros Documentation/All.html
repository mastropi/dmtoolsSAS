<!DOCTYPE html>

<html>
<head>
<title>%All</title>
<style>
pre {display: block}
</style>
<body>
<h1>MACRO %All</h1>
<pre>Version: 1.08                                                                                                           </pre>
<pre>Author: Daniel Mastropietro                                                                                             </pre>
<pre>Created: 30-Oct-00                                                                                                      </pre>
<pre>Modified: 30-May-05                                                                                                     </pre>
<pre>                                                                                                                        </pre>
<h3>DESCRIPTION:</h3>
<pre>This macro generates an expression used to evaluate whether a given condition is true                                                                                          </pre>
<pre>for ALL variables in a list.                                                                                            </pre>
<pre>The macro generates a condition expression of the form:                                                                                          </pre>
<pre>(Var1 = value1 | Var1 = value2 | ... | Var1 = valuen) &                                                                                          </pre>
<pre>(Var2 = value1 | Var2 = value2 | ... | Var2 = valuen) &                                                                                          </pre>
<pre>...                                                                                                                     </pre>
<pre>(Varm = value1 | Varm = value2 | ... | Varm = valuen)                                                                                          </pre>
<pre>                                                                                                                        </pre>
<pre>The '=' sign is the default comparison operator, but it can be replaced by any other comparison                                                                                          </pre>
<pre>operator, such as >, <, ~=, etc.                                                                                          </pre>
<pre>                                                                                                                        </pre>
<h3>USAGE:</h3>
<pre>%All(vars , operator, values , pairwise=0);                                                                                          </pre>
<pre>                                                                                                    </pre>
<h3>REQUIRED PARAMETERS:</h3>
<pre>- vars:                       A list of names separated by blanks identifying the variable names used in the                                                            </pre>
<pre>                              expression generated by the macro.                                                            </pre>
<pre>                                                                                                                        </pre>
<pre>- comparison:                 The comparison operator used in the expression generated by the macro.                                                            </pre>
<pre>                              e.g.: =, >, <, >=, <=, not in, etc.                                                            </pre>
<pre>                                                                                                                        </pre>
<pre>- values:                     A list of values separated by blanks with which the variables in &vars are                                                            </pre>
<pre>                              compared, using the comparison operator &comparison ('=' is the default operator).                                                            </pre>
<pre>                                                                                                                        </pre>
<h3>OPTIONAL PARAMETERS:</h3>
<pre>- pairwise:                   Whether the comparison between the variables passed in 'vars'                                                            </pre>
<pre>                              and the values passed in 'values' should be done pairwise.                                                            </pre>
<pre>                              In this case, the numbers of elements in 'vars' and in 'values'                                                            </pre>
<pre>                              should be equal.                                                                          </pre>
<pre>                              See Example 3 below.                                                                      </pre>
<pre>                              Possible values: 0 => not pairwise, 1 => pairwise.                                                            </pre>
<pre>                              default: 0                                                                                </pre>
<pre>                                                                                                                        </pre>
<h3>RETURNED VALUES:</h3>
<pre>The expression with the condition being evaluated for all the variables in 'vars' is returned.                                                                                           </pre>
<pre>                                                                                                                        </pre>
<h3>NOTES:</h3>
<pre>1.- The condition can be used in the context of a data step or within IML, but not                                                                                          </pre>
<pre>in the macro language, because the variable contained in parameter 'vars' are                                                                                          </pre>
<pre>treated as data step or IML variables, not as macro variables.                                                                                          </pre>
<pre>                                                                                                                        </pre>
<pre>2.- In order to check if the value of a character variable is missing, pass ""                                                                                          </pre>
<pre>as parameter to 'values', with NO space between the quotation marks.                                                                                          </pre>
<pre>The quotation marks should be DOUBLE QUOTES, NOT single.                                                                                          </pre>
<pre>                                                                                                                        </pre>
<h3>OTHER MACROS AND MODULES USED IN THIS MACRO:</h3>
<pre>- %GetNroElements                                                                                                       </pre>
<pre>                                                                                                                        </pre>
<h3>SEE ALSO:</h3>
<pre>- %Any                                                                                                                  </pre>
<pre>- %GetVarList                                                                                                           </pre>
<pre>- %GetVarNames                                                                                                          </pre>
<pre>                                                                                                                        </pre>
<h3>EXAMPLES:</h3>
<pre>1.- The following statement (used inside a SAS data step):                                                                                          </pre>
<pre>'if %all(x y z, =, 0 .) then'                                                                                           </pre>
<pre>will generate the following statement:                                                                                          </pre>
<pre>'if ((x=0 | x=.) & (y=0 | y=.) & (z=0 | z=.)) then'.                                                                                          </pre>
<pre>                                                                                                                        </pre>
<pre>2.- The following statement (used inside a SAS data step):                                                                                          </pre>
<pre>'if %all(x y, >, 0) then'                                                                                               </pre>
<pre>will generate the following statement:                                                                                          </pre>
<pre>'if ((x>0) & (y>0)) then'.                                                                                              </pre>
<pre>                                                                                                                        </pre>
<pre>3.- The following statement (used inside a SAS data step):                                                                                          </pre>
<pre>'if %all(x y, >, 3 4, pairwise=1) then'                                                                                          </pre>
<pre>will generate the following statement:                                                                                          </pre>
<pre>'if ((x>3) & (y>4)) then'.                                                                                              </pre>
<pre>                                                                                                                        </pre>
<pre>4.- Comparing character variables with missing value:                                                                                          </pre>
<pre>'if %all(name lastname, =, "") then'                                                                                          </pre>
<pre>will generate the following statement:                                                                                          </pre>
<pre>'if ((name="") & (lastname="")) then'.                                                                                          </pre>
<pre>NOTE: THERE IS NO SPACE BETWEEN THE QUOTATION MARKS, O.W. THERE AN ERROR IS GIVEN.                                                                                          </pre>
<pre>                                                                                                                        </pre>
<h3>APPLICATIONS:</h3>
<pre>This macro avoids having to write a lengthy statement to evaluate a single                                                                                          </pre>
<pre>condition that must be satisfied by ALL variables in a lengthy list.                                                                                          </pre>
<pre>                                                                                                                        </pre>
<pre>A practical example is to check for observations having missing values in all                                                                                          </pre>
<pre>the variables of a dataset. Assuming the list of variables in a dataset is                                                                                          </pre>
<pre>x y z t u v, the following statement is the one to use for this end:                                                                                          </pre>
<pre>                                                                                                                        </pre>
<pre>'if %all(x y z t u v, =, .) then'                                                                                          </pre>
<pre>                                                                                                                        </pre>
<pre>Note: The list of variables in a dataset can be retrieved with the macro                                                                                          </pre>
<pre>%GetVarNames. However, this will return ALL the variables in a dataset which                                                                                          </pre>
<pre>may include both numeric and character variables, and thus the use of the                                                                                          </pre>
<pre>above statement will yield an error when the comparison against '.' is done                                                                                          </pre>
<pre>for the character variables (because the missing value for a character variable                                                                                          </pre>
<pre>is the empty string ('""')).                                                                                            </pre>
<pre>In order to retrieve the list of numeric and character variables separately,                                                                                          </pre>
<pre>use the macro %GetVarList as follows:                                                                                          </pre>
<pre>%GetVarList(dataset, _NUMERIC_, macrovar=numvar);                                                                                          </pre>
<pre>%GetVarList(dataset, _CHAR_, macrovar=charvar);                                                                                          </pre>
<pre>The macro variables 'numvar' and 'charvar' will respectively contain the list of                                                                                          </pre>
<pre>all the numeric and all the character variables in dataset DATASET.                                                                                          </pre>
<body>
</html>
