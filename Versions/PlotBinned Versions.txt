%PlotBinned Versions: Description of the different versions
-----------------------------------------------------------
Created: 15-Aug-2015
Author: Daniel Mastropietro


V.1.00: 2015/08/14 (DM)
	- Macro created to make plots of a target variable in terms of binned continuous variables and in terms of categorical variables (without binning).
	The current macro signature is as follows:
	%PlotBinned(
		data , 					*** Input dataset.
		target=, (REQUIRED) 	*** Target variable to plot in the Y axis.
		var=_NUMERIC_, 		    *** List of input variables to analyze.
		varclass=, 				*** List of categorical input variables among those listed in VAR.
		datavartype=,			*** Dataset containing the type or level of the variables listed in VAR.
		groupsize=,				*** Nro. of cases each group should contain when categorizing continuous variables.
		groups=20,				*** Nro. of groups to use in the categorization of continuous variables.
		value=mean,				*** Name of the statistic for both the input and target variable in each bin.
		bubble=1,				*** Whether to generate a bubble plot instead of a scatter plot.
		xaxisorig=0,			*** Whether to use the original input variable range on the X axis.
		yaxisorig=1,			*** Whether to use the original target variable range on the Y axis.
		odspath=, 				*** Quoted name of the path where all generated files should be saved.
		odsfile=,				*** Quoted name of the file where the plots are saved.
		odsfiletype=pdf,		*** Type of the file specified in ODSFILE or output format.
		log=1);					*** Show messages in log?

V.1.02: 2015/09/02 (DM)
	- Added new parameter OUT= to generate a dataset containing the data that can be used to reproduce the plots.
	- Added new parameter OUTCORR= to generate a dataset containing the correlation between the binned values and the predicted LOESS values. The corresponding normalized correlation (by the target range in the original data) can be used as a measure of predictive power of the input variables.
	- Make use of the new macros %ExecTimeStart, %ExecTimeStop, %ODSOutputOpen, %ODSOutputClose used to measure the execution time and to open and close the ODS output files.

V.1.03: 2015/09/20 (DM)
	- Added parameter IMAGEROOTNAME=PlotBinned in order to create image files (e.g. PNG format) with meaningful names. The parameter refers to the root name to be used for all image file names generated by ODS graphics. The macro creates the files as <imagerootname>-<target>-<nro>-<variable>.<ext>.
	The change was motivated by the cumbersome of dealing with PDF files since they are too large and take ages to generate (e.g. 8 hours for 40 variables!).

V.1.04: 2015/09/28 (DM)
	- Fixed a bug with the EXCLUDE= parameter: when this was empty, an error occurred with the %Categorize macro because the case when EXCLUDE= could be empty was NOT considered!

V.1.05: 2015/10/01 (DM)
	- Renamed parameter EXCLUDE= with VALUESLETALONE= in order to give a better sense of what it does. In fact those values are NOT excluded from the plot but simply treated as a separate value during the binning process!

V.1.06: 2015/10/28 (DM) --> a backup copy of the previous version was created in the BACKUP directory with the current date in its name.
	- New parameter BY= to do BY processing.
	- The call to the %CheckInputParameters was disabled because it didn't work correctly when the DATA parameter receives data options (it happened with a WHERE condition in the data options where I got the message that not all input parameters (DATA, TARGET) were given).

V.1.07: 2015/11/12 (DM)
	- Fixed a few bugs:
		- The graph was overwritten by new runs of the same plot. This was solved by using the time stamp (in the format yyyymmddThhmmss) as prefix to the name of the PNG file.
		- No output datasets (OUT or OUTCORR) were generated when the analyzed variables had no labels (because the length of the LABEL variable was set to 0!)
		- The macro failed when the LOESS fit did not work for categorical variables (because the smoothing parameter was selected as 0). Note that this was solved by treating categorical variables in a special case (i.e. by not running the LOESS, but the error can still happen if the smoothing parameter of continuous variables is chosen to be 0! --I think)

V.1.08: 2016/02/15 (DM)
	- Following the big change in the %Categorize macro (which was re-written), I removed the option of parameter ALLTOGETHER being equal to 1. The parameter was not removed but the only accepted value is 0, since the new %Categorize macro does not receive ALLTOGETHER as a paramter.

V.1.09: 2018/07/16 (DM)
	- Replaced parameter VALUE=&value with STAT=&value in the call to %Categorize because the latter parameter has precedence over the former in the %Categorize macro.
	- In addition, the STAT= parameter now accepts several statistics to be computed.
	- Added two new parameters:
		- smooth=1: whether to fit a smooth curve to the data. This is added so that we can set smooth=0 when the LOESS fit fails thus generating an incomplete output dataset.
		- ylim: common min and max values for the Y axis.

V.1.10: 2018/07/25 (DM)
	- Decimal digits always shown for the target variable in the output dataset: when generating the output dataset, I added the BEST32. format to the target variable, so that its values appear with decimal digits when the target is binary and not as e.g. 0 (just because the format of the target variable in the input dataset was to show NO decimals).
	- Deletion of non-existing global macro variables: changed the definition and deletion of the _TARGET_MIN_ and _TARGET_MAX_ variables so that no warning is generated because these macro variables are not found (this may have happened depending on the input parameters such as YAXISORIG=).
	- Incompatible lengths: added a 'LENGTH &vari 8' statement when creating the _PB_MEANS_ dataset so that no warning is generated by PROC APPEND about the lengths of the VALUE variable (which is the result of renaming &VARI to VALUE), stating that the length is 8 on the BASE dataset and <8 on the DATA dataset (i.e. on the appended dataset).
	- Check input parameters: uncommented the call to %CheckInpuParameters so that all required parameters are checked (e.g. TARGET, which caused me many problems to figure out why many errors occurred and it was because I hadn't specified the TARGET parameter!! --and it took me a long time to find this out...).

V.2.00: 2018/07/26 (DM)
	- Character variables are now accepted!
	- Fixed a bug when computing the statistics for continuous variables.
	- Missing values are now plotted for categorical variables.

V.2.01: 2018/07/27 (DM)
	- Parameter ALLTOGETHER=0 implemented, which means that when values are excluded via the CONDITION= parameter they are let alone in their own separate bin.

V.2.02: 2018/11/29 (DM)
	- Updated macro to new version of the %ODSOutputOpen macro that now receives UNQUOTED paths and files.
